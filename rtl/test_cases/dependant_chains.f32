# Base setup
ld   $1, 0x3000           # Base address
ld   $2, 0x12345678       # Constant
stw  $2, $1[0]

# First long-latency chain (multiply and divide)
ldw  $3, $1[0]            # Load word
mul  $4, $3, $2           # Multiply dependent on $3
divs  $5, $4, $2           # Divide dependent on $4
add  $6, $5, $3           # Dependent on divide

# Second chain overlaps with first chain
ldw  $7, $1[4]            # Load another word
mul  $8, $7, $4           # Multiply depends on first chain ($4)
divs  $9, $8, $5           # Divide depends on second multiply
sub  $10, $9, $6          # Dependent on previous divide

# Independent instruction to check bypassing
ld   $11, 0x1000          # Should not stall
add  $12, $11, $2         # Independent addition

# Back-to-back multiplies to same destination
mul  $13, $2, $2
mul  $13, $13, $2          # Overwrite first multiply
add  $14, $13, $1          # Dependent on second multiply

# Check scoreboard with mixed latency
ldw   $15, $1[8]
divs  $16, $15, $2          # Divide (long latency)
mul  $17, $16, $3          # Multiply depends on divide
add  $18, $17, $12         # Dependent on multiply
ret
